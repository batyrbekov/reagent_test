{"version":3,"sources":["giggin/api.cljs"],"mappings":";;;;AAIA,AAAA,AAAMA,AACHC,AAAIC;AADP,AAAA;AAGOA,AACA,AAACC,AAAI,AAACC,AAAKH,AAAII,AACf,AAAA,AAACC;;AAER,AAAA,AAAMC,AAASC;AAAf,AACE,AAACC,AAAOC,AAAW,AAAA,AAACV,AAAaQ;;AAEnC,AAAA,AAAAG,AAAMM;AAAN,AAAA,AAAAL,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAAI,AAAAJ,AAAA,AAA6BM;AAA7B,AAAAF,AAAAJ,AAAA,AAAoCO;AAApC,AACE,AAAMC,AAAW,AAAA,AAAA,AAAgCF,AAAWC;;AAE9D,AAAA,AAAME;AAAN,AAEE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC,AACWf,AACMU","names":["giggin.api/index-by","key","coll","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core.juxt.cljs$core$IFn$_invoke$arity$2","cljs.core/identity","cljs.core.into.cljs$core$IFn$_invoke$arity$2","giggin.api/handler","response","cljs.core/reset!","giggin.state/gigs","p__26606","map__26607","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","giggin.api/error-handler","status","status-text","js/console","giggin.api/fetch-gigs","ajax.core.GET.cljs$core$IFn$_invoke$arity$variadic"],"sourcesContent":["(ns giggin.api\n  (:require [ajax.core :refer [GET]]\n            [giggin.state :as state]))\n\n(defn index-by\n  [key coll]\n  \"Transfomr a coll to a map with a given key as a lookup value\"\n  (->> coll\n       (map (juxt key identity))\n       (into {})))\n\n(defn handler [response]\n  (reset! state/gigs (index-by :id response)))\n\n(defn error-handler [{:keys [status status-text]}]\n  (.log js/console (str \"something bad happened: \" status \" \" status-text)))\n\n(defn fetch-gigs\n  []\n  (GET \"https://gist.githubusercontent.com/jacekschae/8c10aa58a6163905fffcec33dd6f5a01/raw/20874f73b2c1d0ad08d828131d6ea8392950780a/gigs.json\"\n    {:handler handler\n     :error-handler error-handler\n     :response-format :json\n     :keywords? true}))\n"]}